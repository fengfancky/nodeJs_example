<html>
    <head >
        <meta charset="UTF-8">
        <title>聊天室</title>
        <style type="text/css">
        
            #input{
                width:200px;
                padding: 10px;
               
            }

            #messages{
                position: fixed;
                top:80px;
                bottom: 20px;
                left: 20px;
                right: 20px;
                border: 1px solid #666666;
                padding: 50px;
            }
        </style>
    </head>
    <body>

        输入消息 : 
        <input type="text" id ="input"/>
        <div id="messages"></div>

        <script src="http://119.23.60.190:4000/socket.io/socket.io.js"></script>
        <script type="text/javascript">
            var messagesElement = document.getElementById("messages");
            var lastMessagesElement = null;

            function addMessages(message){
                var newMessageElement = document.createElement('div');
                var newMessageText = document.createTextNode(message);

                newMessageElement.appendChild(newMessageText);
                messagesElement.appendChild(newMessageElement,lastMessagesElement);
                lastMessagesElement = newMessageElement;
            }

            var socket = io.connect('http://119.23.60.190:4000');

            socket.on('serverMessage',function(content){
                addMessages(content);
            });

            socket.on('login',function(){
                var username = prompt('请输入你的昵称：');
                socket.emit('login',username);
            });

            var inputElement = document.getElementById('input');
            inputElement.onkeydown = function(keyboardEvent){
                if(keyboardEvent.keyCode === 13){
                    socket.emit('clientMessage',inputElement.value);
                    inputElement.value = '';
                }else{
                    return true;
                }
            };
        
        
        </script>

    </body>
</html>